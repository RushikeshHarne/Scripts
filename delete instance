#!/bin/bash
## unnati name instance only

# Find instance ID(s) with tag Name=unnati
INSTANCE_IDS=$(aws ec2 describe-instances \
  --filters "Name=tag:Name,Values=unnati" "Name=instance-state-name,Values=running,stopped" \
  --query "Reservations[].Instances[].InstanceId" \
  --output text)

# Check if any instance found
if [ -z "$INSTANCE_IDS" ]; then
  echo "❌ No instances found with tag Name=unnati."
  exit 1
fi

# Terminate instances
echo "🗑️ Terminating instance(s): $INSTANCE_IDS"
aws ec2 terminate-instances --instance-ids $INSTANCE_IDS

echo "✅ Termination command sent."
